<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RetroAvia - Configuratore Game Boy Professionale</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        :root {
            --primary-color: #2563eb;
            --secondary-color: #1e40af;
            --accent-color: #f59e0b;
            --success-color: #10b981;
            --danger-color: #ef4444;
            --warning-color: #f59e0b;
            
            --bg-primary: #0f172a;
            --bg-secondary: #1e293b;
            --bg-tertiary: #334155;
            --bg-glass: rgba(30, 41, 59, 0.8);
            
            --text-primary: #f8fafc;
            --text-secondary: #cbd5e1;
            --text-muted: #94a3b8;
            
            --border-color: rgba(59, 130, 246, 0.2);
            --border-accent: rgba(245, 158, 11, 0.3);
            
            --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
            --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
            
            --font-mono: 'SF Mono', 'Monaco', 'Inconsolata', 'Roboto Mono', 'Consolas', monospace;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            font-weight: 400;
            line-height: 1.6;
            background: linear-gradient(135deg, var(--bg-primary) 0%, var(--bg-secondary) 100%);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
        }
        
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                radial-gradient(circle at 20% 80%, rgba(37, 99, 235, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(245, 158, 11, 0.05) 0%, transparent 50%);
            pointer-events: none;
            z-index: -1;
            animation: backgroundFloat 20s ease-in-out infinite;
        }

        @keyframes backgroundFloat {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-10px) rotate(1deg); }
        }
        
        .hero-section {
            text-align: center;
            padding: 4rem 2rem 2rem;
            background: linear-gradient(135deg, var(--bg-secondary), var(--bg-primary));
            position: relative;
            border-bottom: 1px solid var(--border-color);
            animation: heroFadeIn 1s ease-out;
        }

        @keyframes heroFadeIn {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .hero-title {
            font-family: var(--font-mono);
            font-size: clamp(2.5rem, 5vw, 4rem);
            font-weight: 700;
            margin-bottom: 1rem;
            background: linear-gradient(135deg, var(--text-primary), var(--accent-color));
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            letter-spacing: -0.02em;
            animation: titleGlow 3s ease-in-out infinite;
        }

        @keyframes titleGlow {
            0%, 100% { filter: drop-shadow(0 0 5px rgba(245, 158, 11, 0.3)); }
            50% { filter: drop-shadow(0 0 15px rgba(245, 158, 11, 0.6)); }
        }
        
        .hero-subtitle {
            font-size: clamp(1.1rem, 2.5vw, 1.5rem);
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: var(--text-secondary);
            animation: subtitleSlide 1s ease-out 0.3s both;
        }

        @keyframes subtitleSlide {
            from { opacity: 0; transform: translateX(-30px); }
            to { opacity: 1; transform: translateX(0); }
        }
        
        .hero-description {
            font-size: 1rem;
            color: var(--text-muted);
            max-width: 600px;
            margin: 0 auto;
            animation: descriptionSlide 1s ease-out 0.6s both;
        }

        @keyframes descriptionSlide {
            from { opacity: 0; transform: translateX(30px); }
            to { opacity: 1; transform: translateX(0); }
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem;
            display: grid;
            grid-template-columns: 1fr 400px;
            gap: 2rem;
        }
        
        @media (max-width: 1024px) {
            .container {
                grid-template-columns: 1fr;
                padding: 1rem;
            }
        }
        
        .quick-configs-container {
            margin-bottom: 2rem;
            animation: slideInLeft 0.8s ease-out;
        }

        @keyframes slideInLeft {
            from { opacity: 0; transform: translateX(-30px); }
            to { opacity: 1; transform: translateX(0); }
        }
        
        .quick-configs-title {
            color: var(--accent-color);
            font-size: 1.25rem;
            font-weight: 600;
            text-align: center;
            margin-bottom: 1rem;
        }
        
        .quick-configs {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 1rem;
            padding: 1.5rem;
            background: var(--bg-glass);
            border-radius: 16px;
            border: 1px solid var(--border-color);
            backdrop-filter: blur(10px);
        }
        
        .quick-config {
            background: linear-gradient(135deg, rgba(37, 99, 235, 0.1), rgba(16, 185, 129, 0.1));
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 1.25rem;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            text-align: center;
            position: relative;
            overflow: hidden;
            transform: translateY(0);
        }

        .quick-config::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
            transition: left 0.6s ease;
        }

        .quick-config:hover::before {
            left: 100%;
        }
        
        .quick-config:hover {
            border-color: var(--accent-color);
            transform: translateY(-5px) scale(1.02);
            box-shadow: var(--shadow-lg);
        }
        
        .quick-config h4 {
            color: var(--accent-color);
            font-size: 1rem;
            margin-bottom: 0.5rem;
            font-weight: 600;
        }
        
        .quick-config p {
            color: var(--text-secondary);
            font-size: 0.875rem;
            margin-bottom: 0.75rem;
        }
        
        .quick-config .price {
            color: var(--success-color);
            font-size: 1.125rem;
            font-weight: 700;
            font-family: var(--font-mono);
        }
        
        .configurator {
            background: var(--bg-glass);
            border-radius: 20px;
            padding: 2rem;
            backdrop-filter: blur(15px);
            border: 1px solid var(--border-color);
            animation: slideInRight 0.8s ease-out;
        }

        @keyframes slideInRight {
            from { opacity: 0; transform: translateX(30px); }
            to { opacity: 1; transform: translateX(0); }
        }
        
        .section {
            margin-bottom: 2rem;
            padding: 2rem;
            background: rgba(15, 23, 42, 0.6);
            border-radius: 16px;
            border: 1px solid var(--border-color);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            opacity: 0;
            transform: translateY(20px);
        }

        .section.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .section::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(245, 158, 11, 0.1), transparent);
            transition: left 0.8s ease;
            position: relative;
        }
        
        .section:hover {
            border-color: var(--border-accent);
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        .section:hover::before {
            left: 100%;
        }
        
        .section-title {
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--accent-color);
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .option-group {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }
        
        .option {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            background: var(--bg-secondary);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            border: 1px solid transparent;
            position: relative;
            overflow: hidden;
        }

        .option::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.05), transparent);
            transition: left 0.5s ease;
        }

        .option:hover::before {
            left: 100%;
        }
        
        .option:hover {
            background: rgba(37, 99, 235, 0.1);
            border-color: var(--primary-color);
            transform: translateX(3px);
        }
        
        .option.selected {
            background: linear-gradient(135deg, rgba(37, 99, 235, 0.2), rgba(30, 64, 175, 0.2));
            border-color: var(--primary-color);
            color: var(--text-primary);
            transform: translateX(5px);
            box-shadow: 0 4px 12px rgba(37, 99, 235, 0.3);
        }
        
        .option input[type="radio"] {
            width: 20px;
            height: 20px;
            accent-color: var(--primary-color);
        }
        
        .option-label {
            flex: 1;
            font-size: 1rem;
            font-weight: 500;
        }
        
        .option-price {
            font-weight: 600;
            color: var(--success-color);
            font-family: var(--font-mono);
            font-size: 0.875rem;
        }

        /* Shell Color Selection */
        .shell-color-container {
            margin-top: 1.5rem;
            padding: 1.5rem;
            background: rgba(37, 99, 235, 0.05);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            display: none;
            opacity: 0;
            transform: translateY(10px);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .shell-color-container.active {
            display: block;
            opacity: 1;
            transform: translateY(0);
        }

        .shell-color-title {
            font-size: 1rem;
            font-weight: 600;
            color: var(--accent-color);
            margin-bottom: 1rem;
            text-align: center;
        }

        .shell-colors-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 0.75rem;
            margin-bottom: 1rem;
        }

        .shell-color-option {
            border: 2px solid var(--border-color);
            border-radius: 8px;
            padding: 0.75rem;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            text-align: center;
            background: var(--bg-secondary);
            position: relative;
            transform: scale(1);
        }

        .shell-color-option:hover {
            border-color: var(--accent-color);
            transform: translateY(-2px) scale(1.02);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }

        .shell-color-option.selected {
            border-color: var(--primary-color);
            background: rgba(37, 99, 235, 0.1);
            transform: scale(1.05);
            box-shadow: 0 0 20px rgba(37, 99, 235, 0.4);
        }

        .shell-color-swatch {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            margin: 0 auto 0.5rem;
            border: 2px solid rgba(255, 255, 255, 0.2);
            position: relative;
            transition: transform 0.3s ease;
        }

        .shell-color-option:hover .shell-color-swatch {
            transform: scale(1.1);
        }

        .shell-color-name {
            font-size: 0.75rem;
            font-weight: 500;
            color: var(--text-secondary);
        }

        /* Shell Color Swatches */
        .shell-color-swatch.grey-solid { background: #6b7280; }
        .shell-color-swatch.black { background: #1f2937; }
        .shell-color-swatch.clear-white { 
            background: linear-gradient(45deg, rgba(255,255,255,0.9), rgba(255,255,255,0.7));
            border-color: #d1d5db;
        }
        .shell-color-swatch.solid-green { background: #10b981; }
        .shell-color-swatch.solid-yellow { background: #f59e0b; }
        .shell-color-swatch.solid-purple { background: #8b5cf6; }
        .shell-color-swatch.solid-red { background: #ef4444; }
        .shell-color-swatch.solid-orange { background: #f97316; }
        .shell-color-swatch.solid-blue { background: #3b82f6; }
        .shell-color-swatch.clear-blue { 
            background: linear-gradient(45deg, rgba(59,130,246,0.8), rgba(59,130,246,0.6));
        }
        .shell-color-swatch.amber { background: #f59e0b; }
        .shell-color-swatch.clear-purple { 
            background: linear-gradient(45deg, rgba(139,92,246,0.8), rgba(139,92,246,0.6));
        }
        .shell-color-swatch.clear-red { 
            background: linear-gradient(45deg, rgba(239,68,68,0.8), rgba(239,68,68,0.6));
        }
        .shell-color-swatch.clear-yellow { 
            background: linear-gradient(45deg, rgba(245,158,11,0.8), rgba(245,158,11,0.6));
        }
        .shell-color-swatch.clear-black { 
            background: linear-gradient(45deg, rgba(31,41,55,0.9), rgba(31,41,55,0.7));
        }

        /* Image Upload Styles */
        .image-upload-container {
            margin-top: 1.5rem;
            padding: 1.5rem;
            background: rgba(37, 99, 235, 0.05);
            border: 2px dashed var(--border-color);
            border-radius: 12px;
            text-align: center;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            display: none;
            opacity: 0;
            transform: translateY(10px);
        }

        .image-upload-container.active {
            display: block;
            opacity: 1;
            transform: translateY(0);
        }

        .image-upload-container.dragover {
            border-color: var(--accent-color);
            background: rgba(245, 158, 11, 0.05);
            transform: scale(1.02);
        }

        .upload-text {
            font-size: 1rem;
            color: var(--text-secondary);
            margin-bottom: 0.75rem;
            font-weight: 500;
        }

        .upload-info {
            font-size: 0.875rem;
            color: var(--text-muted);
            margin-bottom: 1rem;
        }

        .file-input { display: none; }

        .upload-button {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            font-size: 0.875rem;
            position: relative;
            overflow: hidden;
        }

        .upload-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.6s ease;
        }

        .upload-button:hover::before {
            left: 100%;
        }

        .upload-button:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        .image-preview {
            margin-top: 1rem;
            display: none;
            opacity: 0;
            transform: scale(0.95);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .image-preview.active {
            display: block;
            opacity: 1;
            transform: scale(1);
        }

        .preview-image {
            max-width: 100%;
            max-height: 150px;
            border-radius: 8px;
            border: 1px solid var(--border-color);
            margin-bottom: 0.75rem;
            transition: transform 0.3s ease;
        }

        .preview-image:hover {
            transform: scale(1.05);
        }

        .image-info {
            background: var(--bg-secondary);
            padding: 0.75rem;
            border-radius: 8px;
            font-size: 0.75rem;
            margin-bottom: 0.75rem;
            color: var(--text-secondary);
        }

        .remove-image-btn {
            background: var(--danger-color);
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.75rem;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .remove-image-btn:hover {
            background: #dc2626;
            transform: scale(1.05);
        }

        .upload-error {
            background: rgba(239, 68, 68, 0.1);
            color: var(--danger-color);
            padding: 0.75rem;
            border-radius: 8px;
            margin-top: 0.75rem;
            border: 1px solid var(--danger-color);
            font-size: 0.875rem;
            display: none;
            opacity: 0;
            transform: translateY(-10px);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .upload-error.active {
            display: block;
            opacity: 1;
            transform: translateY(0);
        }
        
        .summary-panel {
            background: var(--bg-glass);
            border-radius: 20px;
            padding: 2rem;
            height: fit-content;
            position: sticky;
            top: 2rem;
            border: 1px solid var(--border-color);
            backdrop-filter: blur(15px);
            animation: slideInUp 0.8s ease-out;
        }

        @keyframes slideInUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .summary-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--accent-color);
            text-align: center;
            margin-bottom: 2rem;
            animation: titlePulse 2s ease-in-out infinite;
        }

        @keyframes titlePulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.02); }
        }
        
        .gameboy-preview {
            width: 180px;
            height: 270px;
            background: linear-gradient(145deg, #e5e7eb, #d1d5db);
            border-radius: 20px 20px 12px 12px;
            margin: 2rem auto;
            position: relative;
            box-shadow: var(--shadow-lg);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            animation: gameboyFloat 4s ease-in-out infinite;
        }

        @keyframes gameboyFloat {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-5px) rotate(1deg); }
        }

        .gameboy-preview:hover {
            transform: scale(1.05) rotate(-2deg);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        }
        
        .gameboy-screen {
            width: 110px;
            height: 90px;
            background: #374151;
            border-radius: 8px;
            position: absolute;
            top: 35px;
            left: 50%;
            transform: translateX(-50%);
            border: 3px solid #1f2937;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .gameboy-dpad {
            width: 40px;
            height: 40px;
            background: #6b7280;
            position: absolute;
            bottom: 70px;
            left: 25px;
            border-radius: 50%;
            transition: all 0.3s ease;
        }

        .gameboy-preview:hover .gameboy-dpad {
            background: #9ca3af;
        }
        
        .gameboy-buttons {
            position: absolute;
            bottom: 70px;
            right: 25px;
        }
        
        .gameboy-button {
            width: 16px;
            height: 16px;
            background: #ef4444;
            border-radius: 50%;
            margin: 4px;
            display: inline-block;
            transition: all 0.3s ease;
        }

        .gameboy-preview:hover .gameboy-button {
            background: #f87171;
            transform: scale(1.1);
        }
        
        .gameboy-preview.ips .gameboy-screen {
            background: linear-gradient(45deg, #3b82f6, #6366f1);
            box-shadow: 0 0 20px rgba(59, 130, 246, 0.5);
            animation: screenGlow 2s ease-in-out infinite;
        }

        @keyframes screenGlow {
            0%, 100% { box-shadow: 0 0 20px rgba(59, 130, 246, 0.5); }
            50% { box-shadow: 0 0 30px rgba(59, 130, 246, 0.8); }
        }
        
        .gameboy-preview.led {
            box-shadow: var(--shadow-lg), 0 0 25px rgba(245, 158, 11, 0.4);
            animation: ledPulse 3s ease-in-out infinite;
        }

        @keyframes ledPulse {
            0%, 100% { box-shadow: var(--shadow-lg), 0 0 25px rgba(245, 158, 11, 0.4); }
            50% { box-shadow: var(--shadow-lg), 0 0 40px rgba(245, 158, 11, 0.7); }
        }
        
        .gameboy-preview.custom {
            background: linear-gradient(145deg, #6366f1, #8b5cf6);
        }
        
        .summary-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.75rem 0;
            border-bottom: 1px solid var(--border-color);
            font-size: 0.875rem;
            font-weight: 500;
            transition: all 0.3s ease;
            opacity: 0;
            transform: translateX(-10px);
            animation: itemSlideIn 0.5s ease-out forwards;
        }

        @keyframes itemSlideIn {
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .summary-item:nth-child(1) { animation-delay: 0.1s; }
        .summary-item:nth-child(2) { animation-delay: 0.2s; }
        .summary-item:nth-child(3) { animation-delay: 0.3s; }
        .summary-item:nth-child(4) { animation-delay: 0.4s; }
        .summary-item:nth-child(5) { animation-delay: 0.5s; }
        .summary-item:nth-child(6) { animation-delay: 0.6s; }
        .summary-item:nth-child(7) { animation-delay: 0.7s; }
        .summary-item:nth-child(8) { animation-delay: 0.8s; }
        .summary-item:nth-child(9) { animation-delay: 0.9s; }
        .summary-item:nth-child(10) { animation-delay: 1.0s; }

        .summary-item:hover {
            background: rgba(37, 99, 235, 0.05);
            padding-left: 0.5rem;
            border-radius: 4px;
        }
        
        .summary-item:last-child {
            border-bottom: none;
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 2px solid var(--accent-color);
            font-weight: 600;
            font-size: 1.125rem;
        }
        
        .total-price {
            font-family: var(--font-mono);
            color: var(--success-color);
            font-size: 1.5rem;
            font-weight: 700;
            animation: priceGlow 2s ease-in-out infinite;
        }

        @keyframes priceGlow {
            0%, 100% { 
                color: var(--success-color);
                text-shadow: 0 0 5px rgba(16, 185, 129, 0.3);
            }
            50% { 
                color: #34d399;
                text-shadow: 0 0 15px rgba(16, 185, 129, 0.6);
            }
        }
        
        .customer-form {
            background: var(--bg-glass);
            border-radius: 20px;
            padding: 2rem;
            margin-top: 2rem;
            border: 1px solid var(--success-color);
            backdrop-filter: blur(15px);
            animation: formSlideIn 1s ease-out;
        }

        @keyframes formSlideIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .form-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--success-color);
            margin-bottom: 2rem;
            text-align: center;
            animation: titleBounce 2s ease-in-out infinite;
        }

        @keyframes titleBounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-2px); }
        }
        
        .form-group {
            margin-bottom: 1.5rem;
            opacity: 0;
            transform: translateY(10px);
            animation: formGroupSlide 0.6s ease-out forwards;
        }

        .form-group:nth-child(1) { animation-delay: 0.2s; }
        .form-group:nth-child(2) { animation-delay: 0.4s; }
        .form-group:nth-child(3) { animation-delay: 0.6s; }

        @keyframes formGroupSlide {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .form-label {
            display: block;
            margin-bottom: 0.5rem;
            color: var(--accent-color);
            font-weight: 500;
            font-size: 0.875rem;
        }
        
        .field-required::after {
            content: ' *';
            color: var(--danger-color);
        }
        
        .form-input, .form-textarea {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            background: var(--bg-secondary);
            color: var(--text-primary);
            font-family: inherit;
            font-size: 0.875rem;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .form-input:focus, .form-textarea:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
            transform: scale(1.01);
        }
        
        .form-textarea {
            resize: vertical;
            min-height: 100px;
        }
        
        .validation-error {
            border-color: var(--danger-color) !important;
            animation: shake 0.5s ease-in-out;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }
        
        .validation-message {
            color: var(--danger-color);
            font-size: 0.75rem;
            margin-top: 0.25rem;
            display: none;
            opacity: 0;
            transform: translateY(-5px);
            transition: all 0.3s ease;
        }

        .validation-message.show {
            display: block;
            opacity: 1;
            transform: translateY(0);
        }
        
        .order-id {
            font-family: var(--font-mono);
            color: var(--accent-color);
            text-align: center;
            margin: 1.5rem 0;
            font-size: 1rem;
            font-weight: 500;
            letter-spacing: 0.5px;
            animation: codeGlow 3s ease-in-out infinite;
        }

        @keyframes codeGlow {
            0%, 100% { 
                color: var(--accent-color);
                text-shadow: 0 0 5px rgba(245, 158, 11, 0.3);
            }
            50% { 
                color: #fbbf24;
                text-shadow: 0 0 10px rgba(245, 158, 11, 0.6);
            }
        }
        
        .action-buttons {
            display: flex;
            gap: 0.75rem;
            margin-top: 2rem;
            flex-wrap: wrap;
            opacity: 0;
            transform: translateY(20px);
            animation: buttonsSlideIn 0.8s ease-out 0.5s forwards;
        }

        @keyframes buttonsSlideIn {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .btn {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 8px;
            font-weight: 500;
            font-size: 0.875rem;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            text-transform: none;
            letter-spacing: normal;
            min-width: 120px;
            flex: 1;
            position: relative;
            overflow: hidden;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.6s ease;
        }

        .btn:hover::before {
            left: 100%;
        }
        
        .btn-copy {
            background: linear-gradient(135deg, #6366f1, #8b5cf6);
            color: white;
        }
        
        .btn-email {
            background: linear-gradient(135deg, #3b82f6, #1d4ed8);
            color: white;
        }
        
        .btn-whatsapp {
            background: linear-gradient(135deg, #22c55e, #16a34a);
            color: white;
        }
        
        .btn-instagram {
            background: linear-gradient(135deg, #8b5cf6, #7c3aed);
            color: white;
        }
        
        .btn:hover {
            transform: translateY(-3px) scale(1.02);
            box-shadow: var(--shadow-lg);
        }

        .btn:active {
            transform: translateY(-1px) scale(0.98);
        }
        
        .ai-assistant {
            background: var(--bg-glass);
            border-radius: 20px;
            padding: 2rem;
            margin-top: 2rem;
            border: 1px solid var(--border-accent);
            backdrop-filter: blur(15px);
            animation: assistantSlideIn 1s ease-out;
        }

        @keyframes assistantSlideIn {
            from { opacity: 0; transform: translateX(-20px); }
            to { opacity: 1; transform: translateX(0); }
        }
        
        .ai-title {
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--accent-color);
            margin-bottom: 1.5rem;
            text-align: center;
            animation: robotBlink 3s ease-in-out infinite;
        }

        @keyframes robotBlink {
            0%, 90%, 100% { opacity: 1; }
            95% { opacity: 0.7; }
        }
        
        .ai-suggestions {
            background: var(--bg-secondary);
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            border: 1px solid var(--border-color);
            animation: suggestionsGlow 4s ease-in-out infinite;
        }

        @keyframes suggestionsGlow {
            0%, 100% { box-shadow: 0 0 5px rgba(37, 99, 235, 0.1); }
            50% { box-shadow: 0 0 15px rgba(37, 99, 235, 0.2); }
        }
        
        .suggestion {
            background: rgba(37, 99, 235, 0.1);
            border-left: 3px solid var(--primary-color);
            padding: 1rem;
            margin-bottom: 1rem;
            border-radius: 0 8px 8px 0;
            font-size: 0.875rem;
            line-height: 1.5;
            animation: suggestionSlide 0.6s ease-out;
        }

        @keyframes suggestionSlide {
            from { opacity: 0; transform: translateX(-20px); }
            to { opacity: 1; transform: translateX(0); }
        }
        
        .suggestion:last-child {
            margin-bottom: 0;
        }
        
        .hero-name-generator {
            text-align: center;
            background: rgba(245, 158, 11, 0.1);
            border-radius: 12px;
            padding: 1.5rem;
            border: 1px solid var(--border-accent);
            animation: generatorFloat 6s ease-in-out infinite;
        }

        @keyframes generatorFloat {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-3px); }
        }
        
        .hero-name {
            font-family: var(--font-mono);
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--accent-color);
            margin: 1rem 0;
            animation: nameShine 2s ease-in-out infinite;
        }

        @keyframes nameShine {
            0%, 100% { 
                color: var(--accent-color);
                text-shadow: 0 0 5px rgba(245, 158, 11, 0.3);
            }
            50% { 
                color: #fbbf24;
                text-shadow: 0 0 15px rgba(245, 158, 11, 0.6);
            }
        }
        
        .faq-section {
            background: var(--bg-secondary);
            border-radius: 12px;
            padding: 1.5rem;
            margin-top: 1.5rem;
            border: 1px solid var(--border-color);
        }
        
        .faq-item {
            background: var(--bg-tertiary);
            border-radius: 8px;
            margin-bottom: 0.75rem;
            overflow: hidden;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .faq-item:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
        
        .faq-question {
            padding: 1rem;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            font-weight: 500;
            font-size: 0.875rem;
        }
        
        .faq-question:hover {
            background: rgba(37, 99, 235, 0.1);
        }

        .faq-question .faq-icon {
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .faq-question.active .faq-icon {
            transform: rotate(180deg);
        }
        
        .faq-answer {
            padding: 0 1rem;
            max-height: 0;
            overflow: hidden;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            line-height: 1.5;
            font-size: 0.875rem;
            color: var(--text-secondary);
            opacity: 0;
        }
        
        .faq-answer.active {
            max-height: 200px;
            padding: 1rem;
            opacity: 1;
        }
        
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: linear-gradient(135deg, var(--success-color), var(--primary-color));
            color: white;
            padding: 1rem 1.5rem;
            border-radius: 8px;
            box-shadow: var(--shadow-lg);
            z-index: 1000;
            transform: translateX(400px);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            font-weight: 500;
            font-size: 0.875rem;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .notification.show {
            transform: translateX(0);
            animation: notificationBounce 0.6s ease-out;
        }

        @keyframes notificationBounce {
            0% { transform: translateX(400px); }
            60% { transform: translateX(-10px); }
            80% { transform: translateX(5px); }
            100% { transform: translateX(0); }
        }
        
        .notification.error {
            background: linear-gradient(135deg, var(--danger-color), #dc2626);
        }
        
        .delivery-estimate {
            background: rgba(16, 185, 129, 0.1);
            border: 1px solid var(--success-color);
            border-radius: 8px;
            padding: 1rem;
            margin-top: 1rem;
            text-align: center;
            animation: deliveryPulse 3s ease-in-out infinite;
        }

        @keyframes deliveryPulse {
            0%, 100% { border-color: var(--success-color); }
            50% { border-color: #34d399; }
        }
        
        .delivery-estimate h4 {
            color: var(--success-color);
            margin-bottom: 0.5rem;
            font-size: 0.875rem;
            font-weight: 600;
        }
        
        .delivery-estimate p {
            color: var(--text-secondary);
            font-size: 0.75rem;
        }
        
        .savings-indicator {
            background: var(--success-color);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 16px;
            font-size: 0.75rem;
            font-weight: 500;
            margin-top: 0.75rem;
            display: inline-block;
            animation: savingsBounce 2s ease-in-out infinite;
        }

        @keyframes savingsBounce {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        /* Ripple Effect */
        @keyframes ripple {
            to {
                transform: scale(4);
                opacity: 0;
            }
        }
        
        @media (max-width: 768px) {
            .hero-section {
                padding: 2rem 1rem 1rem;
            }
            
            .configurator, .summary-panel, .customer-form, .ai-assistant {
                padding: 1.25rem;
            }
            
            .action-buttons {
                flex-direction: column;
            }
            
            .quick-configs {
                grid-template-columns: 1fr;
            }
            
            .gameboy-preview {
                width: 150px;
                height: 225px;
            }
            
            .gameboy-screen {
                width: 90px;
                height: 75px;
                top: 30px;
            }

            .shell-colors-grid {
                grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
            }

            .section {
                padding: 1.5rem;
            }

            .option {
                padding: 0.75rem;
            }

            .summary-panel {
                position: relative;
                top: auto;
            }
        }

        /* Scroll animations */
        .scroll-animate {
            opacity: 0;
            transform: translateY(30px);
            transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .scroll-animate.visible {
            opacity: 1;
            transform: translateY(0);
        }
    </style>
</head>
<body>
    <div class="hero-section">
        <div class="hero-content">
            <h1 class="hero-title">🎮 RETROAVIA 🎮</h1>
            <p class="hero-subtitle">✨ Configuratore Game Boy Professionale ✨</p>
            <p class="hero-description">🚀 Crea il tuo Game Boy personalizzato perfetto con modifiche di livello professionale e opzioni di personalizzazione uniche! 🛠️</p>
        </div>
    </div>

    <div class="container">
        <div class="configurator">
            <!-- Configurazioni Rapide -->
            <div class="quick-configs-container scroll-animate">
                <h3 class="quick-configs-title">🚀 Configurazioni Consigliate</h3>
                <div class="quick-configs">
                    <div class="quick-config" onclick="applyQuickConfig('budget')">
                        <h4>💰 Budget</h4>
                        <p>Perfetto per iniziare</p>
                        <div class="price">85€</div>
                    </div>
                    <div class="quick-config" onclick="applyQuickConfig('gaming')">
                        <h4>🎮 Gaming Pro</h4>
                        <p>La scelta dei gamer</p>
                        <div class="price">185€</div>
                    </div>
                    <div class="quick-config" onclick="applyQuickConfig('collector')">
                        <h4>💎 Collezione</h4>
                        <p>Il massimo livello</p>
                        <div class="price">265€</div>
                    </div>
                </div>
            </div>

            <!-- 1. Modello Game Boy -->
            <div class="section scroll-animate">
                <h3 class="section-title">🎮 Modello Game Boy</h3>
                <div class="option-group" id="gameboy-model">
                    <div class="option" onclick="selectOption('gameboy-model', this, 'Game Boy Color', 0)">
                        <input type="radio" name="gameboy-model" value="Game Boy Color">
                        <span class="option-label">🌈 Game Boy Color</span>
                        <span class="option-price">Base</span>
                    </div>
                    <div class="option" onclick="selectOption('gameboy-model', this, 'Game Boy Advance', 0)">
                        <input type="radio" name="gameboy-model" value="Game Boy Advance">
                        <span class="option-label">⚡ Game Boy Advance</span>
                        <span class="option-price">Base</span>
                    </div>
                    <div class="option selected" onclick="selectOption('gameboy-model', this, 'Game Boy Advance SP', 0)">
                        <input type="radio" name="gameboy-model" value="Game Boy Advance SP" checked>
                        <span class="option-label">✨ Game Boy Advance SP</span>
                        <span class="option-price">Base</span>
                    </div>
                </div>
            </div>

            <!-- 2. Livello di Modifica -->
            <div class="section scroll-animate">
                <h3 class="section-title">🛠️ Livello di Modifica</h3>
                <div class="option-group" id="modification-level">
                    <div class="option" onclick="selectOption('modification-level', this, 'Solo Game Boy', 80)">
                        <input type="radio" name="modification-level" value="Solo Game Boy">
                        <span class="option-label">📱 Solo Game Boy (senza modifiche)</span>
                        <span class="option-price">80€</span>
                    </div>
                    <div class="option selected" onclick="selectOption('modification-level', this, 'Con scocca semplice', 100)">
                        <input type="radio" name="modification-level" value="Con scocca semplice" checked>
                        <span class="option-label">🛡️ Con scocca semplice</span>
                        <span class="option-price">100€</span>
                    </div>
                    <div class="option" onclick="selectOption('modification-level', this, 'Con scocca personalizzata', 120)">
                        <input type="radio" name="modification-level" value="Con scocca personalizzata">
                        <span class="option-label">🎨 Con scocca personalizzata</span>
                        <span class="option-price">120€</span>
                    </div>
                </div>

                <!-- Selezione Colore Scocca -->
                <div class="shell-color-container" id="shell-color-container">
                    <div class="shell-color-title">🎨 Scegli il Colore della Scocca</div>
                    <div class="shell-colors-grid" id="shell-colors-grid">
                        <div class="shell-color-option selected" onclick="selectShellColor(this, 'Grey Solid')">
                            <div class="shell-color-swatch grey-solid"></div>
                            <div class="shell-color-name">Grigio Solido</div>
                        </div>
                        <div class="shell-color-option" onclick="selectShellColor(this, 'Black')">
                            <div class="shell-color-swatch black"></div>
                            <div class="shell-color-name">Nero</div>
                        </div>
                        <div class="shell-color-option" onclick="selectShellColor(this, 'Clear White')">
                            <div class="shell-color-swatch clear-white"></div>
                            <div class="shell-color-name">Bianco Trasparente</div>
                        </div>
                        <div class="shell-color-option" onclick="selectShellColor(this, 'Solid Green')">
                            <div class="shell-color-swatch solid-green"></div>
                            <div class="shell-color-name">Verde Solido</div>
                        </div>
                        <div class="shell-color-option" onclick="selectShellColor(this, 'Solid Yellow')">
                            <div class="shell-color-swatch solid-yellow"></div>
                            <div class="shell-color-name">Giallo Solido</div>
                        </div>
                        <div class="shell-color-option" onclick="selectShellColor(this, 'Solid Purple')">
                            <div class="shell-color-swatch solid-purple"></div>
                            <div class="shell-color-name">Viola Solido</div>
                        </div>
                        <div class="shell-color-option" onclick="selectShellColor(this, 'Solid Red')">
                            <div class="shell-color-swatch solid-red"></div>
                            <div class="shell-color-name">Rosso Solido</div>
                        </div>
                        <div class="shell-color-option" onclick="selectShellColor(this, 'Solid Orange')">
                            <div class="shell-color-swatch solid-orange"></div>
                            <div class="shell-color-name">Arancione Solido</div>
                        </div>
                        <div class="shell-color-option" onclick="selectShellColor(this, 'Solid Blue')">
                            <div class="shell-color-swatch solid-blue"></div>
                            <div class="shell-color-name">Blu Solido</div>
                        </div>
                        <div class="shell-color-option" onclick="selectShellColor(this, 'Clear Blue')">
                            <div class="shell-color-swatch clear-blue"></div>
                            <div class="shell-color-name">Blu Trasparente</div>
                        </div>
                        <div class="shell-color-option" onclick="selectShellColor(this, 'Amber')">
                            <div class="shell-color-swatch amber"></div>
                            <div class="shell-color-name">Ambra</div>
                        </div>
                        <div class="shell-color-option" onclick="selectShellColor(this, 'Clear Purple')">
                            <div class="shell-color-swatch clear-purple"></div>
                            <div class="shell-color-name">Viola Trasparente</div>
                        </div>
                        <div class="shell-color-option" onclick="selectShellColor(this, 'Clear Red')">
                            <div class="shell-color-swatch clear-red"></div>
                            <div class="shell-color-name">Rosso Trasparente</div>
                        </div>
                        <div class="shell-color-option" onclick="selectShellColor(this, 'Clear Yellow')">
                            <div class="shell-color-swatch clear-yellow"></div>
                            <div class="shell-color-name">Giallo Trasparente</div>
                        </div>
                        <div class="shell-color-option" onclick="selectShellColor(this, 'Clear Black')">
                            <div class="shell-color-swatch clear-black"></div>
                            <div class="shell-color-name">Nero Trasparente</div>
                        </div>
                    </div>
                </div>

                <!-- Sezione Upload Immagine -->
                <div class="image-upload-container" id="image-upload-container">
                    <div class="upload-text">📁 Carica la tua immagine personalizzata</div>
                    <div class="upload-info">✅ Formati supportati: JPG, PNG | 📏 Dimensione massima: 10MB</div>
                    
                    <input type="file" id="custom-image-input" class="file-input" accept=".jpg,.jpeg,.png" />
                    <button class="upload-button" onclick="document.getElementById('custom-image-input').click()">
                        🖼️ Scegli Immagine
                    </button>
                    
                    <div class="upload-error" id="upload-error">
                        <span id="upload-error-text"></span>
                    </div>
                    
                    <div class="image-preview" id="image-preview">
                        <img id="preview-image" class="preview-image" alt="Anteprima immagine personalizzata" />
                        <div class="image-info" id="image-info">
                            <div><strong>📝 Nome:</strong> <span id="image-name"></span></div>
                            <div><strong>📊 Dimensione:</strong> <span id="image-size"></span></div>
                            <div><strong>🎨 Formato:</strong> <span id="image-type"></span></div>
                        </div>
                        <button class="remove-image-btn" onclick="removeCustomImage()">🗑️ Rimuovi Immagine</button>
                    </div>
                </div>
            </div>

            <!-- 3. Etichetta -->
            <div class="section scroll-animate">
                <h3 class="section-title">🏷️ Etichetta</h3>
                <div class="option-group" id="label">
                    <div class="option selected" onclick="selectOption('label', this, 'Nintendo', 0)">
                        <input type="radio" name="label" value="Nintendo" checked>
                        <span class="option-label">🎯 Nintendo (originale)</span>
                        <span class="option-price">Gratis</span>
                    </div>
                    <div class="option" onclick="selectOption('label', this, 'Personalizzata normale', 5)">
                        <input type="radio" name="label" value="Personalizzata normale">
                        <span class="option-label">🎨 Personalizzata normale</span>
                        <span class="option-price">+5€</span>
                    </div>
                    <div class="option" onclick="selectOption('label', this, 'Personalizzata olografica', 5)">
                        <input type="radio" name="label" value="Personalizzata olografica">
                        <span class="option-label">✨ Personalizzata olografica</span>
                        <span class="option-price">+5€</span>
                    </div>
                </div>
            </div>

            <!-- 4. Batteria -->
            <div class="section scroll-animate">
                <h3 class="section-title">🔋 Batteria</h3>
                <div class="option-group" id="battery">
                    <div class="option selected" onclick="selectOption('battery', this, 'Originale', 0)">
                        <input type="radio" name="battery" value="Originale" checked>
                        <span class="option-label">🔋 Originale</span>
                        <span class="option-price">Gratis</span>
                    </div>
                    <div class="option" onclick="selectOption('battery', this, '850mAh', 10)">
                        <input type="radio" name="battery" value="850mAh">
                        <span class="option-label">⚡ 850mAh</span>
                        <span class="option-price">+10€</span>
                    </div>
                    <div class="option" onclick="selectOption('battery', this, '1600mAh', 20)">
                        <input type="radio" name="battery" value="1600mAh">
                        <span class="option-label">🚀 1600mAh</span>
                        <span class="option-price">+20€</span>
                    </div>
                </div>
            </div>

            <!-- 5. Audio -->
            <div class="section scroll-animate">
                <h3 class="section-title">🔊 Audio</h3>
                <div class="option-group" id="audio">
                    <div class="option selected" onclick="selectOption('audio', this, 'Originale', 0)">
                        <input type="radio" name="audio" value="Originale" checked>
                        <span class="option-label">🔊 Originale</span>
                        <span class="option-price">Gratis</span>
                    </div>
                    <div class="option" onclick="selectOption('audio', this, 'Nuovo', 10)">
                        <input type="radio" name="audio" value="Nuovo">
                        <span class="option-label">🎵 Nuovo</span>
                        <span class="option-price">+10€</span>
                    </div>
                </div>
            </div>

            <!-- 6. Display -->
            <div class="section scroll-animate">
                <h3 class="section-title">📺 Display</h3>
                <div class="option-group" id="display">
                    <div class="option selected" onclick="selectOption('display', this, 'Originale', 0)">
                        <input type="radio" name="display" value="Originale" checked>
                        <span class="option-label">📺 Originale</span>
                        <span class="option-price">Gratis</span>
                    </div>
                    <div class="option" onclick="selectOption('display', this, 'IPS', 60)">
                        <input type="radio" name="display" value="IPS">
                        <span class="option-label">✨ IPS</span>
                        <span class="option-price">+60€</span>
                    </div>
                </div>
            </div>

            <!-- 7. Kit LED -->
            <div class="section scroll-animate">
                <h3 class="section-title">💡 Kit LED</h3>
                <div class="option-group" id="led-kit">
                    <div class="option selected" onclick="selectOption('led-kit', this, 'No', 0)">
                        <input type="radio" name="led-kit" value="No" checked>
                        <span class="option-label">🌙 No</span>
                        <span class="option-price">Gratis</span>
                    </div>
                    <div class="option" onclick="selectOption('led-kit', this, 'Sì', 35)">
                        <input type="radio" name="led-kit" value="Sì">
                        <span class="option-label">✨ Sì</span>
                        <span class="option-price">+35€</span>
                    </div>
                </div>
            </div>

            <!-- 8. Box Personalizzato -->
            <div class="section scroll-animate">
                <h3 class="section-title">📦 Box Personalizzato</h3>
                <div class="option-group" id="custom-box">
                    <div class="option selected" onclick="selectOption('custom-box', this, 'No', 0)">
                        <input type="radio" name="custom-box" value="No" checked>
                        <span class="option-label">📦 No</span>
                        <span class="option-price">Gratis</span>
                    </div>
                    <div class="option" onclick="selectOption('custom-box', this, 'Sì', 20)">
                        <input type="radio" name="custom-box" value="Sì">
                        <span class="option-label">🎁 Sì</span>
                        <span class="option-price">+20€</span>
                    </div>
                </div>
            </div>

            <!-- 9. Cover Trasparente -->
            <div class="section scroll-animate">
                <h3 class="section-title">🔍 Cover Trasparente</h3>
                <div class="option-group" id="transparent-cover">
                    <div class="option selected" onclick="selectOption('transparent-cover', this, 'No', 0)">
                        <input type="radio" name="transparent-cover" value="No" checked>
                        <span class="option-label">🚫 No</span>
                        <span class="option-price">Gratis</span>
                    </div>
                    <div class="option" onclick="selectOption('transparent-cover', this, 'Sì', 5)">
                        <input type="radio" name="transparent-cover" value="Sì">
                        <span class="option-label">🔍 Sì</span>
                        <span class="option-price">+5€</span>
                    </div>
                </div>
            </div>

            <!-- 10. Game Boy fornito dal cliente -->
            <div class="section scroll-animate">
                <h3 class="section-title">✅ Game Boy fornito dal cliente</h3>
                <div class="option-group" id="customer-gameboy">
                    <div class="option selected" onclick="selectOption('customer-gameboy', this, 'No', 0)">
                        <input type="radio" name="customer-gameboy" value="No" checked>
                        <span class="option-label">🚫 No</span>
                        <span class="option-price">Gratis</span>
                    </div>
                    <div class="option" onclick="selectOption('customer-gameboy', this, 'Sì', -50)">
                        <input type="radio" name="customer-gameboy" value="Sì">
                        <span class="option-label">✅ Sì</span>
                        <span class="option-price">-50€</span>
                    </div>
                </div>
            </div>

            <div class="customer-form scroll-animate">
                <h3 class="form-title">👤 Informazioni Cliente</h3>
                <div class="form-group">
                    <label class="form-label field-required" for="customer-name">📝 Nome Cliente</label>
                    <input type="text" id="customer-name" class="form-input" placeholder="Il tuo nome..." required>
                    <div class="validation-message" id="name-error">❌ Il nome è obbligatorio</div>
                </div>
                <div class="form-group">
                    <label class="form-label field-required" for="customer-contact">📧 Contatto (Email o Instagram)</label>
                    <input type="text" id="customer-contact" class="form-input" placeholder="email@example.com o @instagram" required>
                    <div class="validation-message" id="contact-error">❌ Il contatto è obbligatorio</div>
                </div>
                <div class="form-group">
                    <label class="form-label" for="customer-notes">💭 Note Personali</label>
                    <textarea id="customer-notes" class="form-textarea" placeholder="Raccontaci cosa rende speciale il tuo Game Boy..."></textarea>
                </div>
                
                <div class="order-id">
                    🆔 Codice Ordine: <span id="order-code">RETRO-GB-2025-001</span>
                </div>

                <div class="action-buttons">
                    <button class="btn btn-copy" onclick="copyConfigurationText()">📋 Copia Testo</button>
                    <button class="btn btn-email" onclick="shareViaEmail()">📧 Email</button>
                    <button class="btn btn-whatsapp" onclick="shareViaWhatsApp()">📱 WhatsApp</button>
                    <button class="btn btn-instagram" onclick="shareViaInstagram()">📷 Instagram</button>
                </div>
            </div>
        </div>

        <div class="summary-panel">
            <!-- Anteprima Game Boy -->
            <div class="gameboy-preview" id="gameboy-preview">
                <div class="gameboy-screen"></div>
                <div class="gameboy-dpad"></div>
                <div class="gameboy-buttons">
                    <div class="gameboy-button"></div>
                    <div class="gameboy-button"></div>
                </div>
            </div>

            <h3 class="summary-title">📋 Riepilogo Configurazione</h3>
            <div id="summary-content">
                <div class="summary-item">
                    <span>🎮 Modello:</span>
                    <span id="summary-model">Game Boy Advance SP</span>
                </div>
                <div class="summary-item">
                    <span>🛠️ Modifica:</span>
                    <span id="summary-modification">Con scocca semplice</span>
                </div>
                <div class="summary-item" id="summary-shell-color-item" style="display: none;">
                    <span>🎨 Colore Scocca:</span>
                    <span id="summary-shell-color">Grigio Solido</span>
                </div>
                <div class="summary-item" id="summary-custom-image-item" style="display: none;">
                    <span>🖼️ Immagine:</span>
                    <span id="summary-custom-image">Caricata</span>
                </div>
                <div class="summary-item">
                    <span>🏷️ Etichetta:</span>
                    <span id="summary-label">Nintendo</span>
                </div>
                <div class="summary-item">
                    <span>🔋 Batteria:</span>
                    <span id="summary-battery">Originale</span>
                </div>
                <div class="summary-item">
                    <span>🔊 Audio:</span>
                    <span id="summary-audio">Originale</span>
                </div>
                <div class="summary-item">
                    <span>📺 Display:</span>
                    <span id="summary-display">Originale</span>
                </div>
                <div class="summary-item">
                    <span>💡 Kit LED:</span>
                    <span id="summary-led">No</span>
                </div>
                <div class="summary-item">
                    <span>📦 Box:</span>
                    <span id="summary-box">No</span>
                </div>
                <div class="summary-item">
                    <span>🔍 Cover:</span>
                    <span id="summary-cover">No</span>
                </div>
                <div class="summary-item">
                    <span>✅ GB Cliente:</span>
                    <span id="summary-customer-gb">No</span>
                </div>
                <div class="summary-item">
                    <span>💰 TOTALE:</span>
                    <span class="total-price" id="total-price">100€</span>
                </div>
                
                <!-- Indicatore di risparmio -->
                <div id="savings-indicator" class="savings-indicator" style="display: none;">
                    💰 Risparmi: <span id="savings-amount">0€</span>
                </div>

                <!-- Stima consegna -->
                <div class="delivery-estimate">
                    <h4>🚚 Tempi di consegna stimati</h4>
                    <p id="delivery-time">14-21 giorni lavorativi</p>
                </div>
            </div>

            <div class="ai-assistant">
                <h3 class="ai-title">🤖 Assistente AI Intelligente</h3>
                
                <div class="ai-suggestions" id="ai-suggestions">
                    <div class="suggestion">
                        💡 <strong>Consiglio Pro:</strong> Con la scocca semplice, valuta l'aggiunta del display IPS per un'esperienza visiva superiore! È la combo preferita dai nostri clienti! ✨
                    </div>
                </div>

                <div class="hero-name-generator">
                    <h4 style="color: var(--accent-color); margin-bottom: 1rem;">🦸‍♂️ Il Tuo Nome da Supereroe</h4>
                    <div class="hero-name" id="hero-name">Captain Pixel</div>
                    <button class="btn btn-copy" onclick="generateHeroName()">🎲 Genera Nuovo Nome</button>
                </div>

                <div class="faq-section">
                    <h4 style="color: var(--success-color); margin-bottom: 1rem;">❓ Domande Frequenti</h4>
                    
                    <div class="faq-item">
                        <div class="faq-question" onclick="toggleFAQ(this)">
                            <span>🏷️ Che differenza c'è tra etichetta normale e olografica?</span>
                            <span class="faq-icon">+</span>
                        </div>
                        <div class="faq-answer">
                            L'etichetta normale ha colori vividi e stampa di alta qualità, perfetta per design personalizzati. L'olografica invece ha effetti prismatici che cambiano colore con la luce - un vero spettacolo che cattura l'attenzione! È il tocco premium che distingue i veri collezionisti! 🌈
                        </div>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question" onclick="toggleFAQ(this)">
                            <span>🎮 Che differenza c'è tra display originale e IPS?</span>
                            <span class="faq-icon">+</span>
                        </div>
                        <div class="faq-answer">
                            Il display IPS è una vera rivoluzione! Offre colori più vividi del 300%, migliore visibilità a 178° di angolazione e retroilluminazione uniforme. È come passare da una TV del 1990 a un monitor gaming del 2025! 🌟
                        </div>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question" onclick="toggleFAQ(this)">
                            <span>⚡ Quale batteria mi consigliate per l'autonomia?</span>
                            <span class="faq-icon">+</span>
                        </div>
                        <div class="faq-answer">
                            Dipende dal tuo stile! La 850mAh è perfetta per 8-12 ore di gioco (uso normale), mentre la 1600mAh ti garantisce 15-20 ore di autonomia continua - ideale per veri gamer e lunghi viaggi! 🚀
                        </div>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question" onclick="toggleFAQ(this)">
                            <span>✨ Il Kit LED vale davvero la spesa?</span>
                            <span class="faq-icon">+</span>
                        </div>
                        <div class="faq-answer">
                            ASSOLUTAMENTE SÌ! Il Kit LED trasforma il tuo Game Boy in uno spettacolo luminoso che fa girare la testa. Perfetto per giocare al buio, creare atmosfera e diventare il centro dell'attenzione. Effetto WOW garantito! 🌈
                        </div>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question" onclick="toggleFAQ(this)">
                            <span>🎨 Come funziona l'upload dell'immagine personalizzata?</span>
                            <span class="faq-icon">+</span>
                        </div>
                        <div class="faq-answer">
                            Quando scegli "scocca personalizzata", puoi caricare la tua immagine (JPG/PNG, max 10MB). La tua immagine verrà stampata direttamente sulla scocca con tecnologia di alta qualità. Perfetto per logo, arte personale o design unici! 🖼️
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="notification" id="notification">
        <span id="notification-text">✅ Configurazione salvata!</span>
    </div>

    <script>
        // === CONFIGURAZIONE GLOBALE ===
        let configuration = {
            'gameboy-model': { name: 'Game Boy Advance SP', price: 0 },
            'modification-level': { name: 'Con scocca semplice', price: 100 },
            'shell-color': { name: 'Grey Solid', price: 0 },
            'label': { name: 'Nintendo', price: 0 },
            'battery': { name: 'Originale', price: 0 },
            'audio': { name: 'Originale', price: 0 },
            'display': { name: 'Originale', price: 0 },
            'led-kit': { name: 'No', price: 0 },
            'custom-box': { name: 'No', price: 0 },
            'transparent-cover': { name: 'No', price: 0 },
            'customer-gameboy': { name: 'No', price: 0 }
        };

        // Variabile globale per l'immagine personalizzata
        let customImageData = null;

        // === CONFIGURAZIONI RAPIDE ===
        const quickConfigs = {
            budget: {
                'gameboy-model': { name: 'Game Boy Advance SP', price: 0 },
                'modification-level': { name: 'Solo Game Boy', price: 80 },
                'shell-color': { name: 'Grey Solid', price: 0 },
                'label': { name: 'Nintendo', price: 0 },
                'battery': { name: 'Originale', price: 0 },
                'audio': { name: 'Originale', price: 0 },
                'display': { name: 'Originale', price: 0 },
                'led-kit': { name: 'No', price: 0 },
                'custom-box': { name: 'No', price: 0 },
                'transparent-cover': { name: 'No', price: 0 },
                'customer-gameboy': { name: 'Sì', price: -50 }
            },
            gaming: {
                'gameboy-model': { name: 'Game Boy Advance SP', price: 0 },
                'modification-level': { name: 'Con scocca semplice', price: 100 },
                'shell-color': { name: 'Solid Blue', price: 0 },
                'label': { name: 'Personalizzata normale', price: 5 },
                'battery': { name: '1600mAh', price: 20 },
                'audio': { name: 'Nuovo', price: 10 },
                'display': { name: 'IPS', price: 60 },
                'led-kit': { name: 'No', price: 0 },
                'custom-box': { name: 'No', price: 0 },
                'transparent-cover': { name: 'No', price: 0 },
                'customer-gameboy': { name: 'No', price: 0 }
            },
            collector: {
                'gameboy-model': { name: 'Game Boy Advance SP', price: 0 },
                'modification-level': { name: 'Con scocca personalizzata', price: 120 },
                'shell-color': { name: 'Clear Purple', price: 0 },
                'label': { name: 'Personalizzata olografica', price: 5 },
                'battery': { name: '1600mAh', price: 20 },
                'audio': { name: 'Nuovo', price: 10 },
                'display': { name: 'IPS', price: 60 },
                'led-kit': { name: 'Sì', price: 35 },
                'custom-box': { name: 'Sì', price: 20 },
                'transparent-cover': { name: 'Sì', price: 5 },
                'customer-gameboy': { name: 'No', price: 0 }
            }
        };

        // === DATI STATICI ===
        const heroNames = [
            'Captain Pixel', 'RetroShocker', 'Game Master Supreme', 'Pixel Guardian', 'Retro Thunder',
            'Console Commander', 'Digital Defender', 'Arcade Avenger', 'Pixel Phoenix', 'Game Gladiator',
            'Retro Ranger Elite', 'Console Crusader', 'Digital Dynamo', 'Pixel Paladin', 'Game Guardian Pro',
            'ByteBuster', 'RetroVolt', 'PixelStorm', 'GameForce Alpha', 'RetroBlaze', 'PixelHawk'
        ];

        const motivationalPhrases = [
            "🎮 Non tutti gli eroi indossano mantelli... alcuni impugnano un Game Boy unico al mondo! 🦸‍♂️",
            "⚡ Con grande potere arriva un Game Boy ancora più personalizzato! ✨",
            "🚀 Il tuo Game Boy. Il tuo potere. Il tuo stile unico! 🎨",
            "🦸‍♂️ Ogni supereroe ha bisogno del proprio Game Boy leggendario! 🏆",
            "🌟 Pronto a salvare il mondo... un pixel alla volta! 🎯"
        ];

        const aiSuggestions = {
            basic: [
                "💡 <strong>Primo consiglio:</strong> Stai iniziando con una configurazione base solida! Per un upgrade graduale, considera prima il display IPS - trasformerà completamente la tua esperienza visiva! 🌟"
            ],
            intermediate: [
                "🔥 <strong>Combo Killer:</strong> Display IPS + Kit LED = esperienza cinematografica! È la combinazione più richiesta dai nostri clienti! ✨"
            ],
            advanced: [
                "🏆 <strong>Setup Leggendario:</strong> Complimenti! Stai creando un Game Boy da vero collezionista. Ogni supereroe ha bisogno del proprio gadget perfetto! 🦸‍♂️"
            ]
        };

        // === FUNZIONI PER COLORE SCOCCA ===
        function selectShellColor(element, colorName) {
            // Rimuovi selezione da tutti gli altri colori
            const options = element.parentNode.querySelectorAll('.shell-color-option');
            options.forEach(opt => opt.classList.remove('selected'));
            
            // Seleziona il colore cliccato
            element.classList.add('selected');
            
            // Aggiorna configurazione
            configuration['shell-color'] = { name: colorName, price: 0 };
            
            // Aggiorna summary e salva
            updateSummary();
            updateGameBoyPreview();
            saveConfiguration();
            
            // Effetto visivo
            element.style.transform = 'scale(1.1)';
            setTimeout(() => {
                element.style.transform = 'scale(1.05)';
            }, 200);
        }

        function toggleShellColorContainer() {
            const colorContainer = document.getElementById('shell-color-container');
            const isCustomShell = configuration['modification-level']?.name === 'Con scocca personalizzata';
            
            if (colorContainer) {
                if (isCustomShell) {
                    colorContainer.classList.add('active');
                } else {
                    colorContainer.classList.remove('active');
                }
            }
            
            updateSummaryShellColor();
        }

        function updateSummaryShellColor() {
            const summaryShellColorItem = document.getElementById('summary-shell-color-item');
            const summaryShellColorText = document.getElementById('summary-shell-color');
            
            const isCustomShell = configuration['modification-level']?.name === 'Con scocca personalizzata';
            
            if (isCustomShell && summaryShellColorItem && summaryShellColorText) {
                summaryShellColorItem.style.display = 'flex';
                // Traduci i nomi dei colori per il summary
                const colorTranslations = {
                    'Grey Solid': 'Grigio Solido',
                    'Black': 'Nero',
                    'Clear White': 'Bianco Trasparente',
                    'Solid Green': 'Verde Solido',
                    'Solid Yellow': 'Giallo Solido',
                    'Solid Purple': 'Viola Solido',
                    'Solid Red': 'Rosso Solido',
                    'Solid Orange': 'Arancione Solido',
                    'Solid Blue': 'Blu Solido',
                    'Clear Blue': 'Blu Trasparente',
                    'Amber': 'Ambra',
                    'Clear Purple': 'Viola Trasparente',
                    'Clear Red': 'Rosso Trasparente',
                    'Clear Yellow': 'Giallo Trasparente',
                    'Clear Black': 'Nero Trasparente'
                };
                const colorName = configuration['shell-color']?.name || 'Grey Solid';
                summaryShellColorText.textContent = colorTranslations[colorName] || colorName;
            } else if (summaryShellColorItem) {
                summaryShellColorItem.style.display = 'none';
            }
        }

        // === FUNZIONI UPLOAD IMMAGINI ===
        function setupImageUpload() {
            const fileInput = document.getElementById('custom-image-input');
            const uploadContainer = document.getElementById('image-upload-container');
            
            if (fileInput) {
                fileInput.addEventListener('change', handleImageUpload);
            }

            if (uploadContainer) {
                uploadContainer.addEventListener('dragover', (e) => {
                    e.preventDefault();
                    uploadContainer.classList.add('dragover');
                });

                uploadContainer.addEventListener('dragleave', (e) => {
                    e.preventDefault();
                    uploadContainer.classList.remove('dragover');
                });

                uploadContainer.addEventListener('drop', (e) => {
                    e.preventDefault();
                    uploadContainer.classList.remove('dragover');
                    
                    const files = e.dataTransfer.files;
                    if (files.length > 0) {
                        processImageFile(files[0]);
                    }
                });
            }
        }

        function handleImageUpload(event) {
            const file = event.target.files[0];
            if (file) {
                processImageFile(file);
            }
        }

        function processImageFile(file) {
            hideUploadError();

            const allowedTypes = ['image/jpeg', 'image/jpg', 'image/png'];
            if (!allowedTypes.includes(file.type)) {
                showUploadError('⚠️ Formato non supportato! Usa solo JPG o PNG.');
                return;
            }

            const maxSize = 10 * 1024 * 1024;
            if (file.size > maxSize) {
                showUploadError('⚠️ File troppo grande! Dimensione massima: 10MB.');
                return;
            }

            const reader = new FileReader();
            reader.onload = function(e) {
                displayImagePreview(file, e.target.result);
                customImageData = {
                    name: file.name,
                    size: file.size,
                    type: file.type,
                    data: e.target.result
                };
                updateSummaryImage();
                saveConfiguration();
                showNotification('🎨 Immagine caricata con successo! ✅', 'success');
            };

            reader.onerror = function() {
                showUploadError('❌ Errore durante la lettura del file. Riprova.');
            };

            reader.readAsDataURL(file);
        }

        function displayImagePreview(file, dataUrl) {
            const previewContainer = document.getElementById('image-preview');
            const previewImage = document.getElementById('preview-image');
            const imageName = document.getElementById('image-name');
            const imageSize = document.getElementById('image-size');
            const imageType = document.getElementById('image-type');

            if (previewImage) previewImage.src = dataUrl;
            if (imageName) imageName.textContent = file.name;
            if (imageSize) imageSize.textContent = formatFileSize(file.size);
            if (imageType) imageType.textContent = file.type.split('/')[1].toUpperCase();

            if (previewContainer) {
                previewContainer.classList.add('active');
            }
        }

        function removeCustomImage() {
            customImageData = null;
            
            const previewContainer = document.getElementById('image-preview');
            const fileInput = document.getElementById('custom-image-input');
            
            if (previewContainer) {
                previewContainer.classList.remove('active');
            }
            
            if (fileInput) {
                fileInput.value = '';
            }

            updateSummaryImage();
            saveConfiguration();
            showNotification('🗑️ Immagine rimossa! ✅', 'success');
        }

        function updateSummaryImage() {
            const summaryImageItem = document.getElementById('summary-custom-image-item');
            const summaryImageText = document.getElementById('summary-custom-image');
            
            if (customImageData && configuration['modification-level']?.name === 'Con scocca personalizzata') {
                if (summaryImageItem) {
                    summaryImageItem.style.display = 'flex';
                }
                if (summaryImageText) {
                    summaryImageText.textContent = `${customImageData.name} ✅`;
                }
            } else {
                if (summaryImageItem) {
                    summaryImageItem.style.display = 'none';
                }
            }
        }

        function showUploadError(message) {
            const errorContainer = document.getElementById('upload-error');
            const errorText = document.getElementById('upload-error-text');
            
            if (errorText) errorText.textContent = message;
            if (errorContainer) {
                errorContainer.classList.add('active');
                setTimeout(() => {
                    errorContainer.classList.remove('active');
                }, 5000);
            }
        }

        function hideUploadError() {
            const errorContainer = document.getElementById('upload-error');
            if (errorContainer) {
                errorContainer.classList.remove('active');
            }
        }

        function formatFileSize(bytes) {
            if (bytes === 0) return '0 Bytes';
            const k = 1024;
            const sizes = ['Bytes', 'KB', 'MB', 'GB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
        }

        function toggleImageUploadContainer() {
            const uploadContainer = document.getElementById('image-upload-container');
            const isCustomShell = configuration['modification-level']?.name === 'Con scocca personalizzata';
            
            if (uploadContainer) {
                if (isCustomShell) {
                    uploadContainer.classList.add('active');
                } else {
                    uploadContainer.classList.remove('active');
                    if (customImageData) {
                        removeCustomImage();
                    }
                }
            }
            
            updateSummaryImage();
        }

        // === FUNZIONI CORE ===
        function generateUniqueOrderId() {
            const now = new Date();
            const year = now.getFullYear();
            const month = String(now.getMonth() + 1).padStart(2, '0');
            const day = String(now.getDate()).padStart(2, '0');
            const hours = String(now.getHours()).padStart(2, '0');
            const minutes = String(now.getMinutes()).padStart(2, '0');
            const seconds = String(now.getSeconds()).padStart(2, '0');
            const random = Math.floor(Math.random() * 1000).toString().padStart(3, '0');
            
            return `RETRO-GB-${year}${month}${day}-${hours}${minutes}${seconds}-${random}`;
        }

        function saveConfiguration() {
            try {
                const saveData = {
                    configuration: configuration,
                    customImage: customImageData,
                    customerData: {
                        name: document.getElementById('customer-name')?.value || '',
                        contact: document.getElementById('customer-contact')?.value || '',
                        notes: document.getElementById('customer-notes')?.value || ''
                    },
                    timestamp: new Date().toISOString()
                };
                // Salvataggio silenzioso
            } catch (error) {
                // Gestione errori silenziosa
            }
        }

        // === CONFIGURAZIONI RAPIDE ===
        function applyQuickConfig(type) {
            if (!quickConfigs[type]) return;
            
            configuration = { ...quickConfigs[type] };
            
            if (configuration['modification-level']?.name !== 'Con scocca personalizzata') {
                customImageData = null;
            }
            
            updateUIFromConfiguration();
            updateSummary();
            updateGameBoyPreview();
            updateAISuggestions();
            toggleImageUploadContainer();
            toggleShellColorContainer();
            saveConfiguration();
            
            const configNames = {
                'budget': 'Budget',
                'gaming': 'Gaming Pro', 
                'collector': 'Collezione'
            };
            
            showNotification(`🚀 Configurazione ${configNames[type]} applicata! ✨`, 'success');
        }

        function updateUIFromConfiguration() {
            Object.entries(configuration).forEach(([category, config]) => {
                if (category === 'shell-color') {
                    const shellColorOptions = document.querySelectorAll('.shell-color-option');
                    shellColorOptions.forEach(option => {
                        const colorName = option.querySelector('.shell-color-name').textContent;
                        // Map dei nomi tradotti ai nomi inglesi
                        const nameMap = {
                            'Grigio Solido': 'Grey Solid',
                            'Nero': 'Black',
                            'Bianco Trasparente': 'Clear White',
                            'Verde Solido': 'Solid Green',
                            'Giallo Solido': 'Solid Yellow',
                            'Viola Solido': 'Solid Purple',
                            'Rosso Solido': 'Solid Red',
                            'Arancione Solido': 'Solid Orange',
                            'Blu Solido': 'Solid Blue',
                            'Blu Trasparente': 'Clear Blue',
                            'Ambra': 'Amber',
                            'Viola Trasparente': 'Clear Purple',
                            'Rosso Trasparente': 'Clear Red',
                            'Giallo Trasparente': 'Clear Yellow',
                            'Nero Trasparente': 'Clear Black'
                        };
                        const englishName = Object.keys(nameMap).find(key => nameMap[key] === config.name) ? config.name : 
                                          Object.values(nameMap).includes(colorName) ? colorName : config.name;
                        
                        if (colorName === config.name || nameMap[colorName] === config.name) {
                            option.classList.add('selected');
                        } else {
                            option.classList.remove('selected');
                        }
                    });
                } else {
                    const options = document.querySelectorAll(`#${category} .option`);
                    options.forEach(option => {
                        const input = option.querySelector('input');
                        if (input && input.value === config.name) {
                            option.classList.add('selected');
                            input.checked = true;
                        } else {
                            option.classList.remove('selected');
                            if (input) input.checked = false;
                        }
                    });
                }
            });
        }

        // === SELEZIONE OPZIONI ===
        function selectOption(category, element, name, price) {
            // Rimuovi selezione da tutte le opzioni del gruppo
            const options = element.parentNode.querySelectorAll('.option');
            options.forEach(opt => {
                opt.classList.remove('selected');
                opt.querySelector('input').checked = false;
            });
            
            // Seleziona l'opzione cliccata
            element.classList.add('selected');
            element.querySelector('input').checked = true;
            
            // Effetto visivo
            element.style.transform = 'translateX(8px) scale(1.02)';
            setTimeout(() => {
                element.style.transform = 'translateX(5px)';
            }, 200);
            
            // Aggiorna configurazione
            configuration[category] = { name: name, price: price };
            
            // Gestione speciale per il livello di modifica
            if (category === 'modification-level') {
                toggleImageUploadContainer();
                toggleShellColorContainer();
            }
            
            updateSummary();
            updateGameBoyPreview();
            updateAISuggestions();
            saveConfiguration();
        }

        // === AGGIORNAMENTI UI ===
        function updateGameBoyPreview() {
            const preview = document.getElementById('gameboy-preview');
            if (!preview) return;
            
            preview.className = 'gameboy-preview';
            
            if (configuration['display']?.name === 'IPS') {
                preview.classList.add('ips');
            }
            
            if (configuration['led-kit']?.name === 'Sì') {
                preview.classList.add('led');
            }
            
            if (configuration['modification-level']?.name === 'Con scocca personalizzata') {
                preview.classList.add('custom');
            }
        }

        function calculateSavings() {
            const basePrice = 150;
            let currentTotal = 0;
            Object.values(configuration).forEach(item => {
                if (item && typeof item.price === 'number') {
                    currentTotal += item.price;
                }
            });
            
            const savings = Math.max(0, basePrice - currentTotal);
            const savingsIndicator = document.getElementById('savings-indicator');
            const savingsAmount = document.getElementById('savings-amount');
            
            if (savings > 0 && savingsIndicator && savingsAmount) {
                savingsAmount.textContent = savings + '€';
                savingsIndicator.style.display = 'inline-block';
            } else if (savingsIndicator) {
                savingsIndicator.style.display = 'none';
            }
        }

        function updateDeliveryEstimate() {
            const deliveryTime = document.getElementById('delivery-time');
            if (!deliveryTime) return;
            
            let days = 14;
            
            if (configuration['modification-level']?.name === 'Con scocca personalizzata') days += 4;
            if (configuration['display']?.name === 'IPS') days += 2;
            if (configuration['led-kit']?.name === 'Sì') days += 2;
            if (configuration['label']?.name && configuration['label'].name !== 'Nintendo') days += 1;
            if (customImageData) days += 2;
            
            deliveryTime.textContent = `${days}-${days + 7} giorni lavorativi`;
        }

        function updateSummary() {
            const summaryModel = document.getElementById('summary-model');
            const summaryModification = document.getElementById('summary-modification');
            const summaryLabel = document.getElementById('summary-label');
            const summaryBattery = document.getElementById('summary-battery');
            const summaryAudio = document.getElementById('summary-audio');
            const summaryDisplay = document.getElementById('summary-display');
            const summaryLed = document.getElementById('summary-led');
            const summaryBox = document.getElementById('summary-box');
            const summaryCover = document.getElementById('summary-cover');
            const summaryCustomerGb = document.getElementById('summary-customer-gb');
            
            if (summaryModel) summaryModel.textContent = configuration['gameboy-model']?.name || 'Game Boy Advance SP';
            if (summaryModification) summaryModification.textContent = configuration['modification-level']?.name || 'Con scocca semplice';
            if (summaryLabel) summaryLabel.textContent = configuration['label']?.name || 'Nintendo';
            if (summaryBattery) summaryBattery.textContent = configuration['battery']?.name || 'Originale';
            if (summaryAudio) summaryAudio.textContent = configuration['audio']?.name || 'Originale';
            if (summaryDisplay) summaryDisplay.textContent = configuration['display']?.name || 'Originale';
            if (summaryLed) summaryLed.textContent = configuration['led-kit']?.name || 'No';
            if (summaryBox) summaryBox.textContent = configuration['custom-box']?.name || 'No';
            if (summaryCover) summaryCover.textContent = configuration['transparent-cover']?.name || 'No';
            if (summaryCustomerGb) summaryCustomerGb.textContent = configuration['customer-gameboy']?.name || 'No';
            
            let total = 0;
            Object.values(configuration).forEach(item => {
                if (item && typeof item.price === 'number') {
                    total += item.price;
                }
            });
            
            const priceElement = document.getElementById('total-price');
            if (priceElement) {
                priceElement.style.transform = 'scale(1.1)';
                priceElement.style.filter = 'brightness(1.2)';
                priceElement.textContent = `${total}€`;
                
                setTimeout(() => {
                    priceElement.style.transform = 'scale(1)';
                    priceElement.style.filter = 'brightness(1)';
                }, 300);
            }
            
            updateSummaryImage();
            updateSummaryShellColor();
            calculateSavings();
            updateDeliveryEstimate();
        }

        function updateAISuggestions() {
            const suggestionsContainer = document.getElementById('ai-suggestions');
            if (!suggestionsContainer) return;
            
            let suggestionLevel = 'basic';
            let customSuggestions = [];
            
            let totalPrice = 0;
            let advancedFeatures = 0;
            
            Object.values(configuration).forEach(item => {
                if (item && typeof item.price === 'number') {
                    totalPrice += item.price;
                    if (item.price > 20) advancedFeatures++;
                }
            });
            
            if (totalPrice > 150 || advancedFeatures >= 3) {
                suggestionLevel = 'advanced';
            } else if (totalPrice > 100 || advancedFeatures >= 2) {
                suggestionLevel = 'intermediate';
            }
            
            if (configuration['modification-level']?.name === 'Con scocca personalizzata' && !customImageData) {
                customSuggestions.push('🎨 <strong>Immagine Mancante:</strong> Hai scelto la scocca personalizzata! Non dimenticare di caricare la tua immagine per completare il design unico! 📁');
            }
            
            if (configuration['display']?.name === 'IPS' && configuration['led-kit']?.name === 'No') {
                customSuggestions.push('🌟 <strong>Combo Perfetta:</strong> Hai scelto il display IPS! Il Kit LED completerebbe il setup perfetto - immagina come brillerà! ✨');
            }
            
            if (configuration['label']?.name && configuration['label'].name !== 'Nintendo') {
                customSuggestions.push('🏷️ <strong>Personalità Unica:</strong> Etichetta personalizzata = Game Boy unico al mondo! Il tocco finale che fa la differenza tra normale e LEGGENDARIO! ✨');
            }
            
            if (customSuggestions.length === 0) {
                const generalSuggestions = aiSuggestions[suggestionLevel];
                customSuggestions = [generalSuggestions[0]];
            }
            
            suggestionsContainer.innerHTML = customSuggestions.map(suggestion => 
                `<div class="suggestion">${suggestion}</div>`
            ).join('');
        }

        // === NOME SUPEREROE ===
        function generateHeroName() {
            const randomName = heroNames[Math.floor(Math.random() * heroNames.length)];
            const heroElement = document.getElementById('hero-name');
            
            if (heroElement) {
                heroElement.style.opacity = '0';
                heroElement.style.transform = 'scale(0.8)';
                
                setTimeout(() => {
                    heroElement.textContent = randomName;
                    heroElement.style.opacity = '1';
                    heroElement.style.transform = 'scale(1)';
                }, 200);
            }
        }

        // === FAQ ===
        function toggleFAQ(element) {
            const answer = element.nextElementSibling;
            const icon = element.querySelector('.faq-icon');
            const isActive = answer.classList.contains('active');
            
            // Chiudi tutte le altre FAQ
            document.querySelectorAll('.faq-answer').forEach(faq => {
                faq.classList.remove('active');
            });
            document.querySelectorAll('.faq-question').forEach(q => {
                q.classList.remove('active');
                const ico = q.querySelector('.faq-icon');
                if (ico) ico.textContent = '+';
            });
            
            if (!isActive) {
                answer.classList.add('active');
                element.classList.add('active');
                if (icon) icon.textContent = '-';
            }
        }

        // === VALIDAZIONE ===
        function setupFormValidation() {
            const nameField = document.getElementById('customer-name');
            const contactField = document.getElementById('customer-contact');
            const notesField = document.getElementById('customer-notes');
            
            if (nameField) {
                nameField.addEventListener('input', () => {
                    clearValidationError('customer-name', 'name-error');
                    saveConfiguration();
                });
                nameField.addEventListener('blur', () => validateField('customer-name', 'name-error'));
            }
            
            if (contactField) {
                contactField.addEventListener('input', () => {
                    clearValidationError('customer-contact', 'contact-error');
                    saveConfiguration();
                });
                contactField.addEventListener('blur', () => validateField('customer-contact', 'contact-error'));
            }
            
            if (notesField) {
                notesField.addEventListener('input', saveConfiguration);
            }
        }

        function validateField(fieldId, errorId) {
            const field = document.getElementById(fieldId);
            const error = document.getElementById(errorId);
            
            if (!field || !error) return true;
            
            const isEmpty = !field.value.trim();
            
            if (isEmpty) {
                field.classList.add('validation-error');
                error.classList.add('show');
                error.style.display = 'block';
                return false;
            }
            
            field.classList.remove('validation-error');
            error.classList.remove('show');
            error.style.display = 'none';
            return true;
        }

        function clearValidationError(fieldId, errorId) {
            const field = document.getElementById(fieldId);
            const error = document.getElementById(errorId);
            
            if (field) field.classList.remove('validation-error');
            if (error) {
                error.classList.remove('show');
                error.style.display = 'none';
            }
        }

        function validateAllFields() {
            const nameField = document.getElementById('customer-name');
            const contactField = document.getElementById('customer-contact');
            
            const nameValid = nameField && nameField.value.trim() !== '';
            const contactValid = contactField && contactField.value.trim() !== '';
            
            if (!nameValid) validateField('customer-name', 'name-error');
            if (!contactValid) validateField('customer-contact', 'contact-error');
            
            return nameValid && contactValid;
        }

        // === FUNZIONI DOWNLOAD IMMAGINE ===
        function downloadCustomImage() {
            if (!customImageData) {
                showNotification('❌ Nessuna immagine da scaricare! 🖼️', 'error');
                return;
            }
            
            try {
                const link = document.createElement('a');
                link.href = customImageData.data;
                link.download = customImageData.name;
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
                
                showNotification('📥 Immagine scaricata! ✅', 'success');
            } catch (error) {
                showNotification('❌ Errore durante il download! 🔄', 'error');
            }
        }

        // === CONDIVISIONE ===
        function copyConfigurationText() {
            if (!validateAllFields()) {
                showNotification('❌ Completa prima i campi obbligatori! 📝', 'error');
                return;
            }
            
            const customerName = document.getElementById('customer-name')?.value || 'Cliente';
            const customerContact = document.getElementById('customer-contact')?.value || 'Non specificato';
            const customerNotes = document.getElementById('customer-notes')?.value || 'Nessuna nota';
            const orderId = document.getElementById('order-code')?.textContent || 'RETRO-001';
            const heroName = document.getElementById('hero-name')?.textContent || 'Captain Pixel';
            
            let total = 0;
            Object.values(configuration).forEach(item => {
                if (item && typeof item.price === 'number') {
                    total += item.price;
                }
            });
            
            let configText = `🎮 RETROAVIA - Il Configuratore Game Boy Professionale 🎮\n\n`;
            configText += `👤 DATI CLIENTE:\n`;
            configText += `━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\n`;
            configText += `📝 Nome: ${customerName}\n`;
            configText += `📧 Contatto: ${customerContact}\n`;
            configText += `💭 Note: ${customerNotes}\n`;
            configText += `🦸‍♂️ Nome Supereroe: ${heroName}\n`;
            configText += `🆔 Codice Ordine: ${orderId}\n`;
            configText += `📅 Data: ${new Date().toLocaleDateString('it-IT')}\n\n`;
            
            configText += `⚡ CONFIGURAZIONE GAME BOY:\n`;
            configText += `━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\n`;
            
            const configLabels = {
                'gameboy-model': '🎮 Modello Game Boy',
                'modification-level': '🛠️ Livello di Modifica',
                'shell-color': '🎨 Colore Scocca',
                'label': '🏷️ Etichetta',
                'battery': '🔋 Batteria',
                'audio': '🔊 Audio',
                'display': '📺 Display',
                'led-kit': '💡 Kit LED',
                'custom-box': '📦 Box Personalizzato',
                'transparent-cover': '🔍 Cover Trasparente',
                'customer-gameboy': '✅ Game Boy Cliente'
            };
            
            Object.entries(configuration).forEach(([key, value]) => {
                if (value && value.name) {
                    const label = configLabels[key];
                    const priceText = value.price > 0 ? ` (+${value.price}€)` : value.price < 0 ? ` (${value.price}€)` : '';
                    configText += `${label}: ${value.name}${priceText}\n`;
                }
            });
            
            if (customImageData && configuration['modification-level']?.name === 'Con scocca personalizzata') {
                configText += `🖼️ Immagine Personalizzata: ${customImageData.name} (${formatFileSize(customImageData.size)})\n`;
                configText += `💡 NOTA: L'immagine è stata scaricata automaticamente per l'allegato\n`;
            }
            
            configText += `━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\n`;
            configText += `💰 PREZZO TOTALE: ${total}€\n\n`;
            
            const motivationalPhrase = motivationalPhrases[Math.floor(Math.random() * motivationalPhrases.length)];
            configText += `${motivationalPhrase}\n\n`;
            configText += `🚀 Configurazione creata con RetroAvia\n`;
            configText += `🌟 Dove nascono le leggende del gaming!\n`;
            configText += `📷 Seguici su Instagram: @retroavia_\n`;
            configText += `🎮 Il tuo Game Boy sarà unico al mondo! ✨`;
            
            // Se c'è un'immagine personalizzata, scaricala automaticamente
            if (customImageData) {
                downloadCustomImage();
            }
            
            navigator.clipboard.writeText(configText).then(() => {
                showNotification('📋 Configurazione copiata negli appunti! ✅', 'success');
            }).catch(() => {
                const textArea = document.createElement('textarea');
                textArea.value = configText;
                document.body.appendChild(textArea);
                textArea.select();
                try {
                    document.execCommand('copy');
                    showNotification('📋 Configurazione copiata negli appunti! ✅', 'success');
                } catch (err) {
                    showNotification('❌ Impossibile copiare. Seleziona e copia manualmente! 🔄', 'error');
                }
                document.body.removeChild(textArea);
            });
        }

        function shareViaEmail() {
            if (!validateAllFields()) {
                showNotification('❌ Completa prima i campi obbligatori! 📝', 'error');
                return;
            }
            
            const customerName = document.getElementById('customer-name')?.value || 'Cliente';
            const customerContact = document.getElementById('customer-contact')?.value || 'Non specificato';
            const customerNotes = document.getElementById('customer-notes')?.value || 'Nessuna nota';
            const orderId = document.getElementById('order-code')?.textContent || 'RETRO-001';
            const heroName = document.getElementById('hero-name')?.textContent || 'Captain Pixel';
            
            let total = 0;
            Object.values(configuration).forEach(item => {
                if (item && typeof item.price === 'number') {
                    total += item.price;
                }
            });
            
            let bodyText = `🎮 RETROAVIA - ORDINE COMPLETO\n\n`;
            bodyText += `👤 DATI CLIENTE:\n`;
            bodyText += `━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\n`;
            bodyText += `📝 Nome: ${customerName} (${heroName})\n`;
            bodyText += `📧 Contatto: ${customerContact}\n`;
            bodyText += `💭 Note: ${customerNotes}\n`;
            bodyText += `🆔 Codice: ${orderId}\n`;
            bodyText += `📅 Data: ${new Date().toLocaleDateString('it-IT')}\n\n`;
            
            bodyText += `⚡ CONFIGURAZIONE DETTAGLIATA:\n`;
            bodyText += `━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\n`;
            
            const configLabels = {
                'gameboy-model': '🎮 Modello Game Boy',
                'modification-level': '🛠️ Livello Modifica',
                'shell-color': '🎨 Colore Scocca',
                'label': '🏷️ Etichetta',
                'battery': '🔋 Batteria',
                'audio': '🔊 Audio',
                'display': '📺 Display',
                'led-kit': '💡 Kit LED',
                'custom-box': '📦 Box Personalizzato',
                'transparent-cover': '🔍 Cover Trasparente',
                'customer-gameboy': '✅ Game Boy Cliente'
            };
            
            Object.entries(configuration).forEach(([key, value]) => {
                if (value && value.name) {
                    const label = configLabels[key];
                    const priceText = value.price > 0 ? ` (+${value.price}€)` : value.price < 0 ? ` (${value.price}€)` : ' (incluso)';
                    bodyText += `${label}: ${value.name}${priceText}\n`;
                }
            });
            
            if (customImageData && configuration['modification-level']?.name === 'Con scocca personalizzata') {
                bodyText += `\n🖼️ IMMAGINE PERSONALIZZATA:\n`;
                bodyText += `Nome file: ${customImageData.name}\n`;
                bodyText += `Dimensione: ${formatFileSize(customImageData.size)}\n`;
                bodyText += `💡 IMPORTANTE: Allega l'immagine scaricata automaticamente\n`;
                downloadCustomImage();
            }
            
            bodyText += `\n━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\n`;
            bodyText += `💰 TOTALE ORDINE: ${total}€\n\n`;
            bodyText += `🚀 Ordine generato automaticamente da RetroAvia\n`;
            bodyText += `📷 Instagram: @retroavia_`;
            
            const subject = `🎮 RetroAvia - ORDINE ${heroName} (${orderId}) - ${total}€`;
            const mailtoLink = `mailto:?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(bodyText)}`;
            
            try {
                window.open(mailtoLink);
                if (customImageData) {
                    setTimeout(() => {
                        showNotification('📧 Email con ordine completo preparata! 📎 Ricordati di allegare l\'immagine! ✅', 'success');
                    }, 500);
                } else {
                    showNotification('📧 Email con ordine completo preparata! ✅', 'success');
                }
            } catch (error) {
                showNotification('❌ Errore apertura email! 🔄', 'error');
            }
        }

        function shareViaWhatsApp() {
            if (!validateAllFields()) {
                showNotification('❌ Completa prima i campi obbligatori! 📝', 'error');
                return;
            }
            
            const customerName = document.getElementById('customer-name')?.value || 'Cliente';
            const customerContact = document.getElementById('customer-contact')?.value || 'Non specificato';
            const customerNotes = document.getElementById('customer-notes')?.value || 'Nessuna nota';
            const orderId = document.getElementById('order-code')?.textContent || 'RETRO-001';
            const heroName = document.getElementById('hero-name')?.textContent || 'Captain Pixel';
            
            let total = 0;
            Object.values(configuration).forEach(item => {
                if (item && typeof item.price === 'number') {
                    total += item.price;
                }
            });
            
            let text = `🎮 *RETROAVIA - ORDINE COMPLETO*\n\n`;
            text += `👤 *CLIENTE:*\n`;
            text += `📝 ${customerName} (${heroName})\n`;
            text += `📧 ${customerContact}\n`;
            text += `🆔 ${orderId}\n\n`;
            
            text += `⚡ *CONFIGURAZIONE:*\n`;
            
            const configLabels = {
                'gameboy-model': '🎮 Modello',
                'modification-level': '🛠️ Modifica',
                'shell-color': '🎨 Colore',
                'label': '🏷️ Etichetta',
                'battery': '🔋 Batteria',
                'audio': '🔊 Audio',
                'display': '📺 Display',
                'led-kit': '💡 LED',
                'custom-box': '📦 Box',
                'transparent-cover': '🔍 Cover',
                'customer-gameboy': '✅ GB Cliente'
            };
            
            Object.entries(configuration).forEach(([key, value]) => {
                if (value && value.name) {
                    const label = configLabels[key];
                    const priceText = value.price > 0 ? ` (+${value.price}€)` : value.price < 0 ? ` (${value.price}€)` : '';
                    text += `${label}: ${value.name}${priceText}\n`;
                }
            });
            
            if (customImageData && configuration['modification-level']?.name === 'Con scocca personalizzata') {
                text += `\n🖼️ *Immagine:* ${customImageData.name}\n`;
                text += `💡 _Invierò l'immagine separatamente_\n`;
                downloadCustomImage();
            }
            
            if (customerNotes.trim() !== '' && customerNotes !== 'Nessuna nota') {
                text += `\n💭 *Note:* ${customerNotes}\n`;
            }
            
            text += `\n💰 *TOTALE: ${total}€*\n\n`;
            text += `🚀 _Ordine da RetroAvia_`;
            
            const whatsappLink = `https://wa.me/?text=${encodeURIComponent(text)}`;
            
            try {
                window.open(whatsappLink, '_blank');
                if (customImageData) {
                    setTimeout(() => {
                        showNotification('📱 WhatsApp con ordine completo aperto! 📎 Invia l\'immagine separatamente! ✅', 'success');
                    }, 500);
                } else {
                    showNotification('📱 WhatsApp con ordine completo aperto! ✅', 'success');
                }
            } catch (error) {
                showNotification('❌ Errore apertura WhatsApp! 🔄', 'error');
            }
        }

        function shareViaInstagram() {
            if (!validateAllFields()) {
                showNotification('❌ Completa prima i campi obbligatori! 📝', 'error');
                return;
            }
            
            const customerName = document.getElementById('customer-name')?.value || 'Cliente';
            const heroName = document.getElementById('hero-name')?.textContent || 'Captain Pixel';
            const orderId = document.getElementById('order-code')?.textContent || 'RETRO-001';
            
            let total = 0;
            Object.values(configuration).forEach(item => {
                if (item && typeof item.price === 'number') {
                    total += item.price;
                }
            });
            
            let text = `🎮 RETROAVIA - ORDINE\n\n`;
            text += `👤 ${customerName} (${heroName})\n`;
            text += `🆔 ${orderId}\n\n`;
            
            text += `⚡ SETUP:\n`;
            text += `🎮 ${configuration['gameboy-model']?.name}\n`;
            text += `🛠️ ${configuration['modification-level']?.name}\n`;
            
            if (configuration['modification-level']?.name === 'Con scocca personalizzata') {
                text += `🎨 ${configuration['shell-color']?.name}\n`;
            }
            
            text += `📺 Display ${configuration['display']?.name}\n`;
            text += `🔋 Batteria ${configuration['battery']?.name}\n`;
            
            if (configuration['led-kit']?.name === 'Sì') {
                text += `💡 Kit LED incluso\n`;
            }
            
            if (customImageData) {
                text += `🖼️ Design personalizzato\n`;
                downloadCustomImage();
            }
            
            text += `\n💰 Totale: ${total}€\n\n`;
            text += `#RetroAvia #GameBoy #Custom #Retrogaming #ModdedGameBoy`;
            
            navigator.clipboard.writeText(text).then(() => {
                if (customImageData) {
                    showNotification('📷 Testo con ordine copiato e immagine scaricata! Aprendo Instagram... ✅', 'success');
                } else {
                    showNotification('📷 Testo con ordine copiato! Aprendo Instagram... ✅', 'success');
                }
                setTimeout(() => {
                    window.open('https://www.instagram.com/retroavia_/', '_blank');
                }, 1000);
            }).catch(() => {
                showNotification('📋 Copia manualmente il testo! 🔄', 'error');
                window.open('https://www.instagram.com/retroavia_/', '_blank');
            });
        }

        // === UTILITÀ ===
        function showNotification(text, type = 'success') {
            const notification = document.getElementById('notification');
            const notificationText = document.getElementById('notification-text');
            
            if (notification && notificationText) {
                notification.classList.remove('error');
                notificationText.textContent = text;
                
                if (type === 'error') {
                    notification.classList.add('error');
                }
                
                notification.classList.add('show');
                setTimeout(() => {
                    notification.classList.remove('show');
                }, 4000);
            }
        }

        function handleResize() {
            const container = document.querySelector('.container');
            const summaryPanel = document.querySelector('.summary-panel');
            
            if (window.innerWidth <= 1024) {
                if (container) container.style.gridTemplateColumns = '1fr';
                if (summaryPanel) {
                    summaryPanel.style.position = 'relative';
                    summaryPanel.style.top = 'auto';
                }
            } else {
                if (container) container.style.gridTemplateColumns = '1fr 400px';
                if (summaryPanel) {
                    summaryPanel.style.position = 'sticky';
                    summaryPanel.style.top = '2rem';
                }
            }
        }

        // === ANIMAZIONI SCROLL ===
        function initScrollAnimations() {
            const observerOptions = {
                threshold: 0.1,
                rootMargin: '0px 0px -50px 0px'
            };

            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('visible');
                    }
                });
            }, observerOptions);

            document.querySelectorAll('.scroll-animate').forEach(el => {
                observer.observe(el);
            });
        }

        // === INIZIALIZZAZIONE ===
        document.addEventListener('DOMContentLoaded', function() {
            // Genera ID ordine unico
            const orderCodeElement = document.getElementById('order-code');
            if (orderCodeElement) {
                orderCodeElement.textContent = generateUniqueOrderId();
            }
            
            // Inizializza tutte le funzioni
            updateSummary();
            updateGameBoyPreview();
            generateHeroName();
            updateAISuggestions();
            setupFormValidation();
            setupImageUpload();
            toggleImageUploadContainer();
            toggleShellColorContainer();
            initScrollAnimations();
            
            // Animazioni progressive per le sezioni
            const sections = document.querySelectorAll('.section');
            sections.forEach((section, index) => {
                setTimeout(() => {
                    section.classList.add('visible');
                }, index * 100);
            });

            // Gestione errori globale
            window.addEventListener('error', function(e) {
                console.error('Errore JavaScript:', e.error);
            });
        });

        window.addEventListener('resize', handleResize);
        window.addEventListener('load', handleResize);

        // Effetti click avanzati
        document.addEventListener('click', function(e) {
            const target = e.target;
            
            // Effetto ripple per i bottoni
            if (target.classList.contains('btn')) {
                const ripple = document.createElement('span');
                const rect = target.getBoundingClientRect();
                const size = Math.max(rect.width, rect.height);
                
                ripple.style.cssText = `
                    position: absolute;
                    border-radius: 50%;
                    background: rgba(255,255,255,0.3);
                    transform: scale(0);
                    animation: ripple 0.6s linear;
                    width: ${size}px;
                    height: ${size}px;
                    left: ${e.clientX - rect.left - size/2}px;
                    top: ${e.clientY - rect.top - size/2}px;
                    pointer-events: none;
                `;
                
                target.style.position = 'relative';
                target.style.overflow = 'hidden';
                target.appendChild(ripple);
                
                setTimeout(() => ripple.remove(), 600);
            }
        });

        // Supporto accessibilità
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Enter' && e.target.closest('.option')) {
                e.target.closest('.option').click();
            }
            
            if (e.key === 'Escape') {
                document.querySelectorAll('.faq-answer.active').forEach(answer => {
                    answer.classList.remove('active');
                    const question = answer.previousElementSibling;
                    question.classList.remove('active');
                    const icon = question.querySelector('.faq-icon');
                    if (icon) icon.textContent = '+';
                });
            }
        });

        console.log('🎮 RetroAvia Configurator caricato con successo! ✨');
    </script>
</body>
</html>
